# xcvr-backend
a backend service that allows the dynamic creation of lrc servers. see it live at [xcvr.chat](http://xcvr.chat/)

this is just the backend, for a frontend, consider using [xcvr](https://github.com/rachel-mp4/xcvr/)

## how to run
```{bash}
$ cd server
$ go run ./cmd
```

## how to deploy
1. install nginx
2. copy xcvr.conf to /etc/nginx/conf.d/ (change the server_name directive to your domain name)
3. copy static files to /var/www/xcvr/ (if using xcvr for your frontend, then copy the contents of the dist directory generated by `npm run build` to the /var/www/xcvr/)
4. start nginx
5. run xcvr-backend

## endpoints
GET http://localhost:8080/xrpc/getChannels - gets a list of all active channels

POST http://localhost:8080/xrpc/initChannel - accepts json containing metadata about a channel and creates it

## servers
servers are served on ephemeral ports at ws://localhost:PORT/ws

in production, their ports are exposed as ws://xcvr.chat/PORT/ws, which gets proxied to ws://127.0.0.1:PORT/ws